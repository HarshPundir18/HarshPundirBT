09:12:48.5861 | Error | 69d45102-72b8-4f6f-be37-6da2e841e73f | ba8dc55715e841cdaadbbacc121d6340 | UnhandledExceptionHandler exception in API | uniqueIdentifier=da7db23a-2369-46ce-be2b-98526db3a099, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:12:48.5861 | Error | 69d45102-72b8-4f6f-be37-6da2e841e73f | 7f991f27a6984eebaf2b5c5f26bd967f | UnhandledExceptionLogger exception in API | uniqueIdentifier=fc777bbc-2414-4216-8a30-12c1bb97bf0d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:13:18.5975 | Error | de27b87b-19c7-4ebb-bafb-745dc0c0a727 | d62f8c1662134786a1fadcdb272157fa | UnhandledExceptionHandler exception in API | uniqueIdentifier=f7a6c194-6f2a-4bb5-a862-3b7a57af132d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:13:18.5975 | Error | de27b87b-19c7-4ebb-bafb-745dc0c0a727 | 6c5880121738467e9b237ad05e8d7475 | UnhandledExceptionLogger exception in API | uniqueIdentifier=6e799927-dc27-4930-a423-8b586cd00bf4, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:13:48.6114 | Error | fa8eae26-632e-449e-88fb-bab38ed68f87 | cc6ac2c4958b402696bebd88f9a72d52 | UnhandledExceptionHandler exception in API | uniqueIdentifier=3fd5432e-8912-4acb-a03a-01358886dc32, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:13:48.6114 | Error | fa8eae26-632e-449e-88fb-bab38ed68f87 | d3458ae2bada4dd486fa0691941a0d9a | UnhandledExceptionLogger exception in API | uniqueIdentifier=bcb8100d-f3ec-4b60-b1f4-1fb8255acf5c, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:14:18.6145 | Error | 33d1528d-a46c-4b9b-b4b1-cd931cc29b76 | a2af2a95b99845d7be21a79388105de2 | UnhandledExceptionHandler exception in API | uniqueIdentifier=1d557dae-5832-46ac-9ebf-cbf6fe188e36, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:14:18.6145 | Error | 33d1528d-a46c-4b9b-b4b1-cd931cc29b76 | 06179a4e9595426fb9fc4316dfd72d48 | UnhandledExceptionLogger exception in API | uniqueIdentifier=38ccfe33-feae-4378-9e82-6488f32b5f92, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:14:48.6270 | Error | abedb47f-26d0-4eb4-9e04-5a9db06e39c1 | 2f36934fe06842f888791f1961f25b69 | UnhandledExceptionHandler exception in API | uniqueIdentifier=638a333f-49cd-491c-9c1e-9c7b6a86de4b, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:14:48.6270 | Error | abedb47f-26d0-4eb4-9e04-5a9db06e39c1 | b85774312a874eec8aac3f7ae1cf285d | UnhandledExceptionLogger exception in API | uniqueIdentifier=1a9690b4-c109-4a6a-8db5-8274b93ad785, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:15:18.6370 | Error | 1f42b919-259f-447a-bbdb-94dbdfcaf779 | e313d04663a44c9580c634a9c3e1e38b | UnhandledExceptionHandler exception in API | uniqueIdentifier=80888f5b-2834-4d15-8750-926dcb070024, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:15:18.6370 | Error | 1f42b919-259f-447a-bbdb-94dbdfcaf779 | 948bf4b5b44a4ff9a468cffd10af8f02 | UnhandledExceptionLogger exception in API | uniqueIdentifier=965c55bd-2422-453e-b9cc-9dc974a4c7c0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:15:48.6531 | Error | b3bc826f-a094-4f18-99a3-5fe0c5ac7818 | b1f8fddb353f4374b1a4c91458e5079b | UnhandledExceptionHandler exception in API | uniqueIdentifier=141e3c36-21c8-4c0b-89c2-56d5fffef26e, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:15:48.6531 | Error | b3bc826f-a094-4f18-99a3-5fe0c5ac7818 | 134ede768eec4dd484f533447b338c38 | UnhandledExceptionLogger exception in API | uniqueIdentifier=b3599276-4b2d-4640-a2d4-3f73f69c813b, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:16:18.6539 | Error | cb7b4b4e-d048-42f4-bf94-59162ba0c0d4 | 7d4030a18c30459992fa63968eb658af | UnhandledExceptionHandler exception in API | uniqueIdentifier=05c7b7a1-bdfe-421a-b33a-93cf892dac86, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:16:18.6539 | Error | cb7b4b4e-d048-42f4-bf94-59162ba0c0d4 | 4d522864c37e4892b42b9f2db91d5785 | UnhandledExceptionLogger exception in API | uniqueIdentifier=1a6e89ca-62cf-4700-b199-f49ba4ed3ce6, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:37:46.8309 | Error | 113b0eb1-7af2-4aba-8b7b-373a9da4823d | f89112c328c247b091d75a16bf8e9ee7 | UnhandledExceptionHandler exception in API | uniqueIdentifier=254cd226-b843-4858-bdb5-ee906acdfad1, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:37:46.8309 | Error | 113b0eb1-7af2-4aba-8b7b-373a9da4823d | 59500bf7bae745a28f18b16ce58638aa | UnhandledExceptionLogger exception in API | uniqueIdentifier=c28701e9-0827-4f73-9c62-785be935caa3, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:38:16.8469 | Error | 3747ce5d-f1c3-4985-95f1-029ef2fba599 | 13e08a33c2f9429f996e48ad5cf7708b | UnhandledExceptionHandler exception in API | uniqueIdentifier=0f102ff7-3f24-4a9f-a012-008dc9c4cdd3, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:38:16.8469 | Error | 3747ce5d-f1c3-4985-95f1-029ef2fba599 | 8c8083e1a2de48698c2bb0d5f0931345 | UnhandledExceptionLogger exception in API | uniqueIdentifier=c9449137-a942-48bb-9994-161202184be5, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:38:46.8538 | Error | 4524360a-9420-4171-a0b8-d00b8d56ee97 | 7cfd2cfe1c1d472e8ef7d4bff65f03af | UnhandledExceptionHandler exception in API | uniqueIdentifier=171d04e1-9a8a-44b3-835e-bc5e99ff20a8, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:38:46.8538 | Error | 4524360a-9420-4171-a0b8-d00b8d56ee97 | f455e3611e7c482bb6e6b449736a8dc8 | UnhandledExceptionLogger exception in API | uniqueIdentifier=0f009b18-9438-4b33-a836-86f473737a2c, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:39:16.8678 | Error | f439e97c-de9b-4dbb-a7af-62d37c4f46e8 | cd654b0e3f7246a29a858aa9de6d5fed | UnhandledExceptionHandler exception in API | uniqueIdentifier=0cd669a2-f3d4-49a5-9085-388c977233b4, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:39:16.8678 | Error | f439e97c-de9b-4dbb-a7af-62d37c4f46e8 | cb5755e68ec24746ae723d4c8be37ac6 | UnhandledExceptionLogger exception in API | uniqueIdentifier=95b4c62c-3dde-4e2f-b983-faee7a46c795, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:39:46.8742 | Error | c5f5a71d-7acc-41e7-85bd-e38e7a0b9c7a | 74010d305cd14ad79e5df9844a78494d | UnhandledExceptionHandler exception in API | uniqueIdentifier=d76a36b1-5334-4285-9d88-faaf18020a32, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:39:46.8742 | Error | c5f5a71d-7acc-41e7-85bd-e38e7a0b9c7a | d41c435eee2747bb875f87808b5ae73a | UnhandledExceptionLogger exception in API | uniqueIdentifier=343ebc47-4cb7-41b2-ab4d-69e5924389bb, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:40:16.8858 | Error | 0c473923-c3c4-42d0-a183-43b4e6e64a51 | cdbf871d8e5343988e8707a00f7e4385 | UnhandledExceptionHandler exception in API | uniqueIdentifier=66aa6a48-f81b-47e4-9a8d-09ea86a9fb4f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:40:16.8858 | Error | 0c473923-c3c4-42d0-a183-43b4e6e64a51 | 57ecc6baea6a470bb8cfeb9b56716188 | UnhandledExceptionLogger exception in API | uniqueIdentifier=8aa647dd-65bb-4d93-982a-f28ede1b6165, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
09:41:45.5051 | Error | a857ba7b-1776-4d04-829b-7c41e8e78032 | c77353d665fa4ed3a8957dc599826e0b | UnhandledExceptionLogger exception in API | uniqueIdentifier=d99d2fd4-17df-4114-b8fc-0c338640b508, details=, companyName=, exception=System.AggregateException: One or more errors occurred. ---> System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at Infrastructure.Adapters.APAmbiente.V2.ApaAdapterV2.<AcceptEGarEmission>d__11.MoveNext() in C:\Projects\Residuos-BackEnd\Infrastructure.Adapters.APAmbiente.V2\ApaAdapterV2.cs:line 404
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarServiceV2.<AnonymousAcceptEGarAsDestin>d__31.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarServiceV2.cs:line 1379
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.GarController.<AnonymousAcceptEgarEmission>d__34.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 643
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()
---> (Inner Exception #0) System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)<---
 
09:41:45.5051 | Error | a857ba7b-1776-4d04-829b-7c41e8e78032 | 124c4129459b4391a980e9cec6cd0d3a | UnhandledExceptionHandler exception in API | uniqueIdentifier=6edaba91-a5f2-4fcc-a2ac-fae6d350902d, details=, companyName=, exception=System.AggregateException: One or more errors occurred. ---> System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at Infrastructure.Adapters.APAmbiente.V2.ApaAdapterV2.<AcceptEGarEmission>d__11.MoveNext() in C:\Projects\Residuos-BackEnd\Infrastructure.Adapters.APAmbiente.V2\ApaAdapterV2.cs:line 404
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarServiceV2.<AnonymousAcceptEGarAsDestin>d__31.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarServiceV2.cs:line 1379
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.GarController.<AnonymousAcceptEgarEmission>d__34.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 643
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()
---> (Inner Exception #0) System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)<---
 
10:16:28.8720 | Error | 2f194193-b921-4cc9-b841-18c1934a7a36 | e2a13f0888cd47eb8aa09186fa5885b5 | UnhandledExceptionHandler exception in API | uniqueIdentifier=99242cf8-8ff6-47a3-89b3-1a0d0a2fd03e, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:16:28.8720 | Error | 2f194193-b921-4cc9-b841-18c1934a7a36 | 53a9951d2eac465680bbec20d3d3d12c | UnhandledExceptionLogger exception in API | uniqueIdentifier=6a449faa-fe13-43dd-b62e-5242ff4107d0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:16:58.8859 | Error | 7a627875-6f13-4233-850b-5c84b037d4cb | 716f2194f7474357955f374bfed7b92b | UnhandledExceptionHandler exception in API | uniqueIdentifier=d53f6311-1253-440d-9368-e9518edf569f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:16:58.8859 | Error | 7a627875-6f13-4233-850b-5c84b037d4cb | b439283c2a8e4bbb866c9dd6e9d15641 | UnhandledExceptionLogger exception in API | uniqueIdentifier=adff1622-b311-4f8c-b9cf-ee065b1e11f1, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:17:28.8940 | Error | 04d1a47a-fb93-47ec-bdee-cc862d72925a | f86f4459beee4f2da3e6751317389869 | UnhandledExceptionHandler exception in API | uniqueIdentifier=76279326-19b5-4a36-9b6e-34ff590ace9f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:17:28.8940 | Error | 04d1a47a-fb93-47ec-bdee-cc862d72925a | b90aa7bc470c486ebc0238c7513e504c | UnhandledExceptionLogger exception in API | uniqueIdentifier=d191c5d6-ed66-4a8f-9940-08c20564cc23, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:57:30.3120 | Error | 0c39d03a-d673-4fbe-88ad-bd07de031282 | 0198cc4459024d48ba6abe778e366674 | UnhandledExceptionHandler exception in API | uniqueIdentifier=4f9ab18f-3072-4915-8c45-a58265791d1f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:57:30.3120 | Error | 0c39d03a-d673-4fbe-88ad-bd07de031282 | 1cacfc9d56174880b9a15259398905ec | UnhandledExceptionLogger exception in API | uniqueIdentifier=52720d97-4da5-41ac-a0fc-d331553fcf06, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:00.3241 | Error | 5ab2bf59-23ff-4c17-a62d-fd578f00435d | 2ee708927c9d4da7855118e68c2a3b8b | UnhandledExceptionHandler exception in API | uniqueIdentifier=1d380f86-5208-4c7d-bad3-a6534d389300, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:00.3241 | Error | 5ab2bf59-23ff-4c17-a62d-fd578f00435d | 84ce8a10fbf54d4a97f9b091d3283fc4 | UnhandledExceptionLogger exception in API | uniqueIdentifier=c85e341f-0443-4d5e-943e-a7ed84b1cf7d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:10.7131 | Error | 5b47b8c0-b4c3-4b87-a051-b3018bc78f0a | b8207d394a4c4c5e91a0cb293d212dc0 | UnhandledExceptionHandler exception in API | uniqueIdentifier=1719a531-2a87-4095-9b39-e562e71ececc, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:10.7131 | Error | 5b47b8c0-b4c3-4b87-a051-b3018bc78f0a | 9630770b45b94cf8af5474ca0e4da50e | UnhandledExceptionLogger exception in API | uniqueIdentifier=9d1c8f16-eb59-4994-8933-80fba1dca294, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:30.3334 | Error | 81e18f38-af5d-4c17-89ed-eeaca801b2c1 | 1e4c7c1b39744f29a553db0eb95e41fa | UnhandledExceptionHandler exception in API | uniqueIdentifier=045b8a68-7295-4d89-a978-1127aaa49ea7, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:58:30.3334 | Error | 81e18f38-af5d-4c17-89ed-eeaca801b2c1 | 46bccbc2ca2646b49ed33696ed6f2787 | UnhandledExceptionLogger exception in API | uniqueIdentifier=b329d0a6-8d14-4577-aa97-2895e979c8ef, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:00.3405 | Error | 6a850c11-2cf0-4835-8ea9-70f015cd3985 | 4ebb9a814091435e81266aaf4cfb5f70 | UnhandledExceptionHandler exception in API | uniqueIdentifier=4cee4e80-4cdf-4f53-ab62-53f3d353f722, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:00.3405 | Error | 6a850c11-2cf0-4835-8ea9-70f015cd3985 | b89e6480359c4f4cbf4e99903465c2f8 | UnhandledExceptionLogger exception in API | uniqueIdentifier=30c99394-5901-4a7c-95e8-b733d5c80639, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:30.3454 | Error | 9145223d-9059-43be-a492-94b320141177 | 603bcb7a72364b7499a3edb2d3b25f52 | UnhandledExceptionHandler exception in API | uniqueIdentifier=144fa1ab-5996-4f40-99de-43b0c48210a5, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:30.3454 | Error | 9145223d-9059-43be-a492-94b320141177 | f7a951c3cc054b568abafb22ba4f98c9 | UnhandledExceptionLogger exception in API | uniqueIdentifier=14633faf-2c21-42b3-9a51-a5ae9a1f1a96, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:37.3498 | Error | 8112f833-013c-40a1-b228-6c166f704a73 | c951f575a2374ea9b1f3c5b9b881157a | UnhandledExceptionHandler exception in API | uniqueIdentifier=eafcab44-8184-46e8-96ab-3abd480a3061, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
10:59:37.3498 | Error | 8112f833-013c-40a1-b228-6c166f704a73 | 8ce57a92beb34cc0a859909344b675f3 | UnhandledExceptionLogger exception in API | uniqueIdentifier=30499239-12df-4d0f-a3d9-282f2d03d8fe, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:00:00.3572 | Error | 3f7ad877-c483-4193-aba1-bfe4327b2873 | cd342d097b1d455cb53ff6b47a139360 | UnhandledExceptionHandler exception in API | uniqueIdentifier=1f5d7d05-f475-4bd9-bf28-96a33df4590b, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:00:00.3572 | Error | 3f7ad877-c483-4193-aba1-bfe4327b2873 | db6acb3e299f41dda2597e5ae1981117 | UnhandledExceptionLogger exception in API | uniqueIdentifier=51ba9e0a-3284-4e30-99c2-795c9a338e42, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:00:30.3725 | Error | 12e31fb8-e18e-4a15-a6e6-b9c6e21511bb | 36215540dd17428c8e60d0b05d093ffe | UnhandledExceptionHandler exception in API | uniqueIdentifier=a5881f71-db3c-4b5b-8af2-fddf7b205d6f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:00:30.3725 | Error | 12e31fb8-e18e-4a15-a6e6-b9c6e21511bb | 4f8ca01563e44a30b6fe137366672a03 | UnhandledExceptionLogger exception in API | uniqueIdentifier=07d7fad8-06f8-4ebf-8102-d81f6af51525, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:01:00.3835 | Error | 4e9078c6-c541-4a8e-9451-2ea6ce3388ed | 734dd93661f24acd98541e613ea1dc14 | UnhandledExceptionHandler exception in API | uniqueIdentifier=7caabe4e-70ba-4893-a6a2-deab47eec51a, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:01:00.3835 | Error | 4e9078c6-c541-4a8e-9451-2ea6ce3388ed | 1bb74b5f38fb425fa9522ac439665117 | UnhandledExceptionLogger exception in API | uniqueIdentifier=24ddbbc5-313f-44c2-bf53-8df6698e5f4f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:01:30.3889 | Error | 74527d04-45f3-4586-8d52-69d293490b97 | 2f4af67c3cda47238f8d8a3bc6f1654a | UnhandledExceptionHandler exception in API | uniqueIdentifier=94a525b8-12ff-44d6-b2bb-43818007f7d0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:01:30.3889 | Error | 74527d04-45f3-4586-8d52-69d293490b97 | 03d516a189314064adeb8c139dbaaba8 | UnhandledExceptionLogger exception in API | uniqueIdentifier=8a0113d4-2eb8-4b58-a049-aeb2a578195f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:02:00.4000 | Error | 337dec1f-1fe6-4d15-bee7-35fe2c519eee | 3d61d8b92be8494986acc42aeafd4d0b | UnhandledExceptionHandler exception in API | uniqueIdentifier=ea9e75dd-a30e-469d-9ce8-dc9031ecf482, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:02:00.4000 | Error | 337dec1f-1fe6-4d15-bee7-35fe2c519eee | 0d329bf5e8e64ab6ba411ccb5def122f | UnhandledExceptionLogger exception in API | uniqueIdentifier=0b376f0b-90c4-4c38-b8c4-1259317f1f7d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:02:30.4054 | Error | f8f8370d-f0b4-4d1c-a2b5-674169b839ae | 497c73187b0d4f5fa50aaac8050b3763 | UnhandledExceptionHandler exception in API | uniqueIdentifier=60ee649f-04d3-4acd-a12e-eec442451b25, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:02:30.4054 | Error | f8f8370d-f0b4-4d1c-a2b5-674169b839ae | 4e34dbc7bff7485ea9b2b523bad77368 | UnhandledExceptionLogger exception in API | uniqueIdentifier=5dd6e136-7100-42ae-b5ea-c53f790295f1, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:03:00.4215 | Error | 5583e170-df22-46a1-9a5d-1b6fbc8f3271 | a2f4a9c26b5449289e5b6a6a7ff98eae | UnhandledExceptionHandler exception in API | uniqueIdentifier=c8ed274f-ff03-4d6d-8af2-abf05b9f7ed9, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:03:00.4215 | Error | 5583e170-df22-46a1-9a5d-1b6fbc8f3271 | 20de6ad2b80641a8a23af1f9dc7da70d | UnhandledExceptionLogger exception in API | uniqueIdentifier=f9360d6e-a50d-4bc5-bdbb-14afa4ac98bc, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:03:30.4288 | Error | 6d2a9894-f8ed-48ac-a6aa-864f4d213029 | a1500a986f954d24a867d002ddcaea76 | UnhandledExceptionHandler exception in API | uniqueIdentifier=e3c14ac9-3f38-4401-bcc3-332a2d81e1ce, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:03:30.4288 | Error | 6d2a9894-f8ed-48ac-a6aa-864f4d213029 | 34e8c759a8fc4b90955eb5abcb04af90 | UnhandledExceptionLogger exception in API | uniqueIdentifier=4a291175-88c9-4777-8b60-beb763b4dec4, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:04:00.4402 | Error | d4d25cb8-3ac0-4412-a1b5-b92a17b5bda4 | 78b222190a154b5fb396b69cf605f134 | UnhandledExceptionHandler exception in API | uniqueIdentifier=3317a3ae-1579-4134-ac5c-e7dca27378f0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:04:00.4402 | Error | d4d25cb8-3ac0-4412-a1b5-b92a17b5bda4 | 850e8961a7494517a37081e3bffc7040 | UnhandledExceptionLogger exception in API | uniqueIdentifier=194b4b9b-676a-47de-888d-b7663505ab39, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:08:04.0005 | Error | 11afca7a-e533-4e4a-a265-b3c145dfdf8f | e16864c35d7d4b278dde96b048538c05 | UnhandledExceptionHandler exception in API | uniqueIdentifier=db6f1c33-eeb4-44d3-bb68-477d1a6328e3, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:08:04.0005 | Error | 11afca7a-e533-4e4a-a265-b3c145dfdf8f | 7ae3b075c05d4055b71bdbca5a2357ea | UnhandledExceptionLogger exception in API | uniqueIdentifier=ab5e245a-8039-4939-8313-bac837d66f2d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:08:34.0164 | Error | 2d998f50-9bd8-450c-9454-5a20d6ef9a3f | 957171c35fb54136b82a2c94d95aaccf | UnhandledExceptionHandler exception in API | uniqueIdentifier=493463f9-e2bb-4254-bf2f-e791676ee391, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:08:34.0164 | Error | 2d998f50-9bd8-450c-9454-5a20d6ef9a3f | 893ffc2b741b4a8eab9bbc1e46e35226 | UnhandledExceptionLogger exception in API | uniqueIdentifier=660599cb-f909-40d9-b62a-5926fc259271, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:09:04.0272 | Error | fbe98a36-2c2a-4096-a1ef-16a2e61632ad | da2e15568f6343bebec570816a2dbd8c | UnhandledExceptionHandler exception in API | uniqueIdentifier=0e86882f-0737-435d-9c92-f2b1e44ef68e, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:09:04.0272 | Error | fbe98a36-2c2a-4096-a1ef-16a2e61632ad | 38f170c86b284cf184fa357857a5db1b | UnhandledExceptionLogger exception in API | uniqueIdentifier=4ea2b5f8-1800-4602-9297-589f84efbfb7, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:09:34.0431 | Error | bb025c64-0097-4894-bdfa-dbb554fee497 | 5ab03410c28f47e2a3b3dce3738897ad | UnhandledExceptionHandler exception in API | uniqueIdentifier=ebe5f4b4-c9f6-40a8-be94-e9aab27e2871, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:09:34.0431 | Error | bb025c64-0097-4894-bdfa-dbb554fee497 | eb7f717b2ccd4cc3bebd0ab296596be1 | UnhandledExceptionLogger exception in API | uniqueIdentifier=47e3c5fb-5b6a-4e3a-beb0-edb3e77145ee, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:14:44.4782 | Error | 458b4bb0-dcb9-4be9-92ca-e89e71a1cead | 9bc9d4921a554303ba2b564c59f746d2 | UnhandledExceptionHandler exception in API | uniqueIdentifier=ec82ec63-b486-49b1-aadd-6533ee3dcbe4, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:14:44.4782 | Error | 458b4bb0-dcb9-4be9-92ca-e89e71a1cead | f4e1be0da9bb468f80cf46b2d8791ce4 | UnhandledExceptionLogger exception in API | uniqueIdentifier=69d916b8-5521-46d4-abd3-7b5abe1733c8, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:15:14.4847 | Error | 24dfeb83-61d4-4e79-b4df-e9a43884518b | 05663c2d0ac44a1db02ccd8062f4f534 | UnhandledExceptionHandler exception in API | uniqueIdentifier=111ace96-a6b9-4de8-95e1-d1f4669f4c62, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:15:14.4847 | Error | 24dfeb83-61d4-4e79-b4df-e9a43884518b | 9df0fbedd61d415e93c4ced9771cec06 | UnhandledExceptionLogger exception in API | uniqueIdentifier=05bdbc83-4d9d-472f-aa36-692127967757, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:15:44.5008 | Error | c4080042-16c2-47b3-bff0-f7d49481860f | bb61d0126d714980b4db7008866d7c69 | UnhandledExceptionHandler exception in API | uniqueIdentifier=6e904c46-2b38-4358-8670-838bef44a0c0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:15:44.5008 | Error | c4080042-16c2-47b3-bff0-f7d49481860f | 32b81c71bf6842f79bb8efdfb381c77e | UnhandledExceptionLogger exception in API | uniqueIdentifier=5cab4bf2-068a-4182-a11f-6dd25feb0c1c, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:16:14.5117 | Error | 7e95e864-76a3-4e2c-bd46-860941306b39 | 1280c4b1276a48928c7c44c33544ad41 | UnhandledExceptionHandler exception in API | uniqueIdentifier=1ee75ae1-e808-4bc9-a943-3668715b3090, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:16:14.5117 | Error | 7e95e864-76a3-4e2c-bd46-860941306b39 | 356a913fd9a2439fb93dcfe081984933 | UnhandledExceptionLogger exception in API | uniqueIdentifier=4f95a148-e5f3-42e8-9d90-5cb6c504e2a1, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:16:44.5216 | Error | 3d1d288a-9871-4700-809d-21aeac8a8a6b | 381690afd4f74d11bec51ac667fa24f4 | UnhandledExceptionHandler exception in API | uniqueIdentifier=56fd3eab-573b-44f5-9a5e-757150d3fcd0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:16:44.5216 | Error | 3d1d288a-9871-4700-809d-21aeac8a8a6b | fc9367a47ff149438767e2efeca7871e | UnhandledExceptionLogger exception in API | uniqueIdentifier=84fe9612-c1a4-46bb-b19a-7dcbbcf7d608, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:17:14.5231 | Error | f70d6e0e-6909-495a-ac8f-98cbf62b91a7 | aa638dbe6c2645f8ac5434136e85d9b9 | UnhandledExceptionHandler exception in API | uniqueIdentifier=40feb14d-309d-4dc5-bf40-6133eb6533c2, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:17:14.5231 | Error | f70d6e0e-6909-495a-ac8f-98cbf62b91a7 | e0cfa92dc2ad484095f54232f181b170 | UnhandledExceptionLogger exception in API | uniqueIdentifier=edc04ef0-2a06-4420-888f-df4b0b5a1432, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:17:44.5386 | Error | 7172a488-41e9-49da-8d24-7a6f60e6928c | 16b5080631fb40498aa8fb4d8b6e6b8b | UnhandledExceptionHandler exception in API | uniqueIdentifier=2f343f47-081f-4d76-abf5-8ec5ae220a71, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:17:44.5386 | Error | 7172a488-41e9-49da-8d24-7a6f60e6928c | 23ea6bee026d41baa319e2acaa1ccd1c | UnhandledExceptionLogger exception in API | uniqueIdentifier=0448c386-c2c3-40d7-8fa8-90050575a254, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:18:14.5424 | Error | 210666cc-dbc8-4de2-b778-bc88b291c2dc | 7c3e17f07cfd4f4faa5f73967d921de2 | UnhandledExceptionHandler exception in API | uniqueIdentifier=a65aa9ed-1561-44f5-8324-68b772a9ff24, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:18:14.5424 | Error | 210666cc-dbc8-4de2-b778-bc88b291c2dc | fc2d4118a804480e82a39ad7d4076fcc | UnhandledExceptionLogger exception in API | uniqueIdentifier=70cee72a-c611-4354-8423-846c4dac8c18, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:19:30.9455 | Error | 5680da35-3b2f-4647-ad5a-8bb4e608d0d3 | 68beb3c78b5346a586f551c4c411fe15 | UnhandledExceptionHandler exception in API | uniqueIdentifier=fec49471-532b-4886-8965-366fbe0679fb, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:19:30.9455 | Error | 5680da35-3b2f-4647-ad5a-8bb4e608d0d3 | 6a01f63d1c93479a951cc91c75643f38 | UnhandledExceptionLogger exception in API | uniqueIdentifier=d57502b5-1e11-43e5-ac2b-48f332da83b6, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:20:00.9609 | Error | 5532060e-602c-4a27-9a99-f5fa3acfb478 | 20fc18c0bc9f48ae978b6dd690467063 | UnhandledExceptionHandler exception in API | uniqueIdentifier=972017cd-b2d8-4a57-8d2f-6e3b7a68df62, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:20:00.9609 | Error | 5532060e-602c-4a27-9a99-f5fa3acfb478 | f588c691d6c14e5a9381e5fbbb50e377 | UnhandledExceptionLogger exception in API | uniqueIdentifier=2e5a91cc-03b6-4ff8-a4a7-4f0ad2b8a536, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:20:30.9765 | Error | 46100c5b-a633-4992-a242-a3ab2463069a | 4d69caea0d8f420896e4c3445af72e8d | UnhandledExceptionHandler exception in API | uniqueIdentifier=a892bdae-91e5-4f2d-a3cc-467aae56d5c2, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:20:30.9765 | Error | 46100c5b-a633-4992-a242-a3ab2463069a | fa119036f33b4bbaa68a32f6ff58ebf3 | UnhandledExceptionLogger exception in API | uniqueIdentifier=2f469420-e843-48b3-a132-358fe7b18093, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:21:00.9783 | Error | 7f44f970-28ad-4d27-adb1-ee21c1aa32d6 | 803f3a5f9b834054a96f6038ecc6366d | UnhandledExceptionHandler exception in API | uniqueIdentifier=4a226994-9180-4a49-ab9d-07f29c81cc1d, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:21:00.9783 | Error | 7f44f970-28ad-4d27-adb1-ee21c1aa32d6 | 6ad11b546c5940edb1f57402d892bab4 | UnhandledExceptionLogger exception in API | uniqueIdentifier=046e7a10-0129-4ace-aeef-202c3eb8fa30, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:21:30.9888 | Error | 140225c3-48ed-416f-a84b-44b4b96161a6 | 0be19edfdacb4eae97342f92a68160f7 | UnhandledExceptionHandler exception in API | uniqueIdentifier=4716bb26-ac84-4d16-9b28-c955ae274200, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:21:30.9888 | Error | 140225c3-48ed-416f-a84b-44b4b96161a6 | f170a78e33064dcab7a6d4d16eb55b51 | UnhandledExceptionLogger exception in API | uniqueIdentifier=dbf1b849-98a5-41c7-8d5f-1b64f283cb4f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:22:00.9994 | Error | 24806432-6bd0-412b-90af-ef8c87f59dd6 | 82f18f276e7749f198d9db998e773579 | UnhandledExceptionHandler exception in API | uniqueIdentifier=77914a3e-8ce6-4b77-b7ff-cd0051ed1283, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:22:00.9994 | Error | 24806432-6bd0-412b-90af-ef8c87f59dd6 | 30a201ab7dd14fd5a78c4293984ea14d | UnhandledExceptionLogger exception in API | uniqueIdentifier=7d93fab1-abe7-4107-909f-c57ed510b8a0, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:22:31.0033 | Error | 5f2881fb-d140-4715-9414-e87e50238a19 | 4edb9aa84c0b44289316c050eb1c2b7d | UnhandledExceptionHandler exception in API | uniqueIdentifier=78ba32e7-0e9c-4188-a58b-496ff5013888, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:22:31.0033 | Error | 5f2881fb-d140-4715-9414-e87e50238a19 | fc7394bd5416451386917611cba4879e | UnhandledExceptionLogger exception in API | uniqueIdentifier=b2960ca5-67ac-4f04-b7d1-ba958021ab30, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:23:01.0154 | Error | 8869b7be-94c4-4281-8a0a-f9b5b1b8b62f | dc70526c8d244fd6b44c72aeb9e05c7a | UnhandledExceptionHandler exception in API | uniqueIdentifier=751f429b-8efa-4889-a3ef-fd7edd03ba67, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:23:01.0154 | Error | 8869b7be-94c4-4281-8a0a-f9b5b1b8b62f | 75f955381b17454ba9e0509a30a997bd | UnhandledExceptionLogger exception in API | uniqueIdentifier=0b9b61e5-b8af-4912-8cdc-e6b1b6093bce, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Policies.IntervinientPolicy_v2.<CheckIntervinientActionsAsync>d__2.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Policies\IntervinientPolicy_v2.cs:line 41
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 229
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:23:31.0219 | Error | 30fae616-9ebb-4184-88c8-fda2659a5c3a | c71f4df9b6ff4087ab1c4d8caf8f6258 | UnhandledExceptionHandler exception in API | uniqueIdentifier=fecb5f6c-7bd8-42ef-8240-31c71e75fc2f, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:23:31.0219 | Error | 30fae616-9ebb-4184-88c8-fda2659a5c3a | c5da7daa08b74276a6ada5590253c9f4 | UnhandledExceptionLogger exception in API | uniqueIdentifier=e534fe4f-043a-424d-9a86-0816c81281ff, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:24:01.0267 | Error | f2361881-63a4-41ed-8acc-33bb63114d3f | dbd7bb2122104db2a86308aace6930a5 | UnhandledExceptionHandler exception in API | uniqueIdentifier=0df41e7a-c766-48a1-acc1-e53bcbfaeb92, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:24:01.0580 | Error | f2361881-63a4-41ed-8acc-33bb63114d3f | 5e3785593f88439fa09c27882b582d32 | UnhandledExceptionLogger exception in API | uniqueIdentifier=7ca0bce7-6385-41de-8ecd-aeaecf8c7d94, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:24:31.0640 | Error | dfd7f02b-9c07-43db-8e11-748051d89b14 | accd028d275f4539bf880ca6ae084b5b | UnhandledExceptionHandler exception in API | uniqueIdentifier=64e0de80-2770-4767-8ca4-a975ad9e0037, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:24:31.0640 | Error | dfd7f02b-9c07-43db-8e11-748051d89b14 | 73b6140e6ee84ca381e02bef44db63b0 | UnhandledExceptionLogger exception in API | uniqueIdentifier=777b9adf-89ff-410c-bb57-d889842eac21, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:25:01.0789 | Error | 1f14c133-4d8d-46e8-b74e-4df0c34afbc4 | 8b4648a6ce124ce18ec18ddedc41f6b0 | UnhandledExceptionHandler exception in API | uniqueIdentifier=58ca303a-449d-4e5d-bb33-ff4777a0c537, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:25:01.0789 | Error | 1f14c133-4d8d-46e8-b74e-4df0c34afbc4 | b0d6d227fdad4668967e2cbfcf3b79f0 | UnhandledExceptionLogger exception in API | uniqueIdentifier=9039e53b-053e-4187-bc30-9c9a5bc9b8c7, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:25:31.1106 | Error | ca60367e-6c80-48ec-9f3f-163398734ebd | 5d2edd53ec6649a7b6a87b3c339aa8d4 | UnhandledExceptionHandler exception in API | uniqueIdentifier=8ffadd71-a2a6-40e5-9f1a-aa8c7abb4d77, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:25:31.1106 | Error | ca60367e-6c80-48ec-9f3f-163398734ebd | 441ca096b4df4668854c5531d6cff4c2 | UnhandledExceptionLogger exception in API | uniqueIdentifier=d67493c8-1cbe-4412-a3b9-aa150a6c5dd2, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:26:01.1244 | Error | 0e97d8b6-22e7-41b8-a610-21d200d06e47 | 8aae7655690749fb86585f402297b346 | UnhandledExceptionHandler exception in API | uniqueIdentifier=0aad23d1-0a36-4c17-a5a3-23665c503aee, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:26:01.1244 | Error | 0e97d8b6-22e7-41b8-a610-21d200d06e47 | 39d623bec3f54fc6bd4b641b7e797911 | UnhandledExceptionLogger exception in API | uniqueIdentifier=c0d751ae-2e78-4f71-91cb-664dd84513da, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
             ]
  Name:clientId - Value:71
[SQL: 
SELECT 
    UE.UserEstablishmentId, 
    UE.ClientId, 
    UE.EstablishmentName AS Name, 
	UE.Vat,
	UE.ApaCode,
    UE.IsDefault, 
    IIF(UEC.Password is null, 0, 1) as IsAccessConfigured,
    UE.UniqueId, 
    A.Street, 
    A.PostalCode, 
	A.Local, 
    A.City,
	UE.ExSituPickupPointUniqueId,
	UE.OuaPickupPointUniqueId,
	UE.ExternalId,
    UEC.Password
FROM UserEstablishments UE WITH(NOLOCK)
LEFT OUTER JOIN UserEstablishmentSettings UES WITH(NOLOCK) 
	ON UE.UserEstablishmentId=UES.UserEstablishmentId
LEFT OUTER JOIN Addresses A WITH(NOLOCK)
	ON UE.UserEstablishmentId=A.UserEstablishmentId 
LEFT OUTER JOIN UserEstablishmentCredentials UEC WITH(NOLOCK)
	ON UE.UserEstablishmentId=UEC.UserEstablishmentId 
WHERE (UE.ClientId = @p0 and UE.DeletedUtc is null)

ORDER BY 
	UE.IsDefault DESC

OFFSET 0 ROWS FETCH NEXT 2000 ROWS ONLY
;
            ] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Establishments.UserEstablishmentRepository.GetEstablishmentLookupProjection(Int32 clientId, Int32 offset, Int32 limit) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Establishments\UserEstablishmentRepository.cs:line 150
   at Domain.Policies.UserEstablishmentPolicy.<GetUserEstablishmentLookups>d__36.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 642
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<>c__DisplayClass35_0.<<GetCachedEstablishments>b__0>d.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 622
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Cache.WaitToFinishMemoryCache.<GetOrCreateIfNotExists>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetCachedEstablishments>d__35.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 620
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Domain.Policies.UserEstablishmentPolicy.<GetDropdownEstablishments>d__33.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\UserEstablishmentPolicy.cs:line 586
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Establishments.UserEstablishmentService.<GetDropdownEstablishments>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Establishments\UserEstablishmentService.cs:line 439
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.EstablishmentController.<SelectAvailableEstablishments>d__21.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\EstablishmentController.cs:line 285
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:33:38.6393 | Error | e5a1543a-ccd3-403d-b44d-d36ec105a049 | 3e52a9a41602496380e91e7696dae611 | UnhandledExceptionHandler exception in API | uniqueIdentifier=66766fca-6677-4781-8b3b-b19e1f66a1e3, details=, companyName=, exception=System.AggregateException: One or more errors occurred. ---> System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at Infrastructure.Adapters.APAmbiente.V2.ApaAdapterV2.<AcceptEGarRectification>d__6.MoveNext() in C:\Projects\Residuos-BackEnd\Infrastructure.Adapters.APAmbiente.V2\ApaAdapterV2.cs:line 247
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarServiceV2.<ImpressionateAcceptEgarRectification>d__24.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarServiceV2.cs:line 940
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.GarController.<Impressionate_AcceptEGarRectification>d__26.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 517
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()
---> (Inner Exception #0) System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)<---
 
11:33:38.6548 | Error | e5a1543a-ccd3-403d-b44d-d36ec105a049 | d8232930869c401c89799f57b38e37f7 | UnhandledExceptionLogger exception in API | uniqueIdentifier=197ef711-5cee-484f-9d28-f2472d3f26e5, details=, companyName=, exception=System.AggregateException: One or more errors occurred. ---> System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at System.Threading.Tasks.Task`1.get_Result()
   at Infrastructure.Adapters.APAmbiente.V2.ApaAdapterV2.<AcceptEGarRectification>d__6.MoveNext() in C:\Projects\Residuos-BackEnd\Infrastructure.Adapters.APAmbiente.V2\ApaAdapterV2.cs:line 247
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Application.Services.Gars.GarServiceV2.<ImpressionateAcceptEgarRectification>d__24.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarServiceV2.cs:line 940
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Api.Controllers.GarController.<Impressionate_AcceptEGarRectification>d__26.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 517
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext()
---> (Inner Exception #0) System.ServiceModel.Security.MessageSecurityException: The HTTP request is unauthorized with client authentication scheme 'Anonymous'. The authentication header received from the server was ''. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
   --- End of inner exception stack trace ---
   at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.SendAsyncResult.End(SendAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannel.EndCall(String action, Object[] outs, IAsyncResult result)
   at System.ServiceModel.Channels.ServiceChannelProxy.TaskCreator.<>c__DisplayClass7_0`1.<CreateGenericTask>b__0(IAsyncResult asyncResult)
   at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)<---
 
11:57:09.7291 | Error | 8703d2fd-bd22-483f-93b7-357796e0bc65 | a3a932cc84554aa0b343de152d97fe65 | UnhandledExceptionLogger exception in API | uniqueIdentifier=593d8554-8b30-438c-a88a-7e14d3835155, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
11:57:09.7291 | Error | 8703d2fd-bd22-483f-93b7-357796e0bc65 | 517247d44fbd486fb5f016660b87143a | UnhandledExceptionHandler exception in API | uniqueIdentifier=ebf08910-55ce-4336-8d49-1fa0b45dcefc, details=, companyName=, exception=NHibernate.Exceptions.GenericADOException: could not execute query
[ 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
 ]
  Name:offset - Value:0  Name:limit - Value:50  Name:vatsTransporter - Value:501351167
[SQL: 
SELECT 
    TotalRows = COUNT(*) OVER(),
	G.GarId, G.UniqueId, G.Status, G.OriginPickUpPointCode,
    G.Transporter1Vat, G.Transporter2Vat, G.Transporter3Vat, G.Transporter4Vat, G.Transporter5Vat,
	GE.ExternalNumber, GE.ExternalVerificationCode, GE.ExternalStatus, GE.ExternalStatusCode,
    GE.ExternalUrl, GE.WaitingAuthorization, GE.ExternalStatusDate,
	G.OriginName, G.OriginVat, G.OriginApaCode, G.OriginAddress, 
    G.DestinName, G.DestinVat, G.DestinApaCode, G.DestinAddress,
	G.EgarCreationType, 	G.SummarizedOnDateUtc,
	GR.Quantity as OriginalQuantity, LCR.Code as OriginalLer, OCR.Code as OriginalOperation, GR.EndLifeVehiclePlate,
	GRE.Id, GRE.RectifiedQuantity, GRE.RectifiedLer, GRE.RectifiedOperation,
	CASE 
		WHEN GRE.RectifiedQuantity IS NOT NULL AND GRE.RectifiedQuantity <> GR.Quantity THEN GRE.RectifiedQuantity
		ELSE GR.Quantity
	END as FinalQuantity,
	CASE	
		WHEN GRE.RectifiedLer IS NOT NULL AND GRE.RectifiedLer <> LCR.Code 
			THEN GRE.RectifiedLer
			ELSE LCR.Code
	END as FinalLer,
	CASE 
		WHEN GRE.RectifiedOperation IS NOT NULL AND GRE.RectifiedOperation <> OCR.Code 
			THEN GRE.RectifiedOperation
			ELSE OCR.Code
	END as FinalOperation,
    P.Id AS ProductId,
	P.Description AS ProductDescription

FROM Gars G
INNER JOIN GarExternals GE on GE.GarId = G.GarId
INNER JOIN GarResidues GR on GR.GarId = G.GarId
INNER JOIN LerCodes LCR on LCR.LerCodeId = GR.LerCodeId
INNER JOIN OperationCodes OCR on OCR.OperationCodeId = GR.OperationCodeId
LEFT OUTER JOIN GarProductMappings GPM on GPM.GarId = G.GarId
LEFT JOIN Products P on P.Id = GPM.ProductId
OUTER APPLY
        (
            SELECT TOP 1 
				GRE.Id, 
				GRE.Quantity as RectifiedQuantity,
				LCRRectified.Code as RectifiedLer, 
				OCRRectified.Code as RectifiedOperation
			FROM GarRectifications GRE 
			LEFT OUTER JOIN LerCodes LCRRectified on LCRRectified.LerCodeId = GRE.LerCodeId
			LEFT OUTER JOIN OperationCodes OCRRectified on OCRRectified.OperationCodeId = GRE.OperationCodeId
			WHERE GRE.GarId = G.GarId order by GRE.GarId desc
        ) GRE
WHERE 
    G.DeletedUtc IS NULL AND

    

    

    

    

    

    

    

    
   
(
     
(
    G.Transporter1Vat IN (@p0) 
    OR G.Transporter2Vat IN (@p0) 
    OR G.Transporter3Vat IN (@p0) 
    OR G.Transporter4Vat IN (@p0) 
    OR G.Transporter5Vat IN (@p0) 
)
    
 
)
ORDER BY GE.ExternalNumber DESC OFFSET @p5 ROWS FETCH NEXT @p6 ROWS ONLY
] ---> System.Data.SqlClient.SqlException: Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. ---> System.ComponentModel.Win32Exception: The wait operation timed out
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.DoExecuteReader(DbCommand cmd)
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(DbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(DbCommand st, QueryParameters queryParameters, ISessionImplementor session, IResultTransformer forcedResultTransformer)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters, IResultTransformer forcedResultTransformer, QueryCacheResultBuilder queryCacheResultBuilder)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces)
   at NHibernate.Impl.SessionImpl.ListCustomQuery(ICustomQuery customQuery, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List(NativeSQLQuerySpecification spec, QueryParameters queryParameters, IList results)
   at NHibernate.Impl.AbstractSessionImpl.List[T](NativeSQLQuerySpecification spec, QueryParameters queryParameters)
   at NHibernate.Impl.SqlQueryImpl.List[T]()
   at Infrastructure.Data.Repositories.Gars.GarRepository.GetEgars_v2(SmartgarContext context, GetEGarsRequestFromDbV2 request, IEnumerable`1 statuses, Boolean userIsProfileRcd) in C:\Projects\Residuos-BackEnd\Infrastructure.Data\Repositories\Gars\GarRepository.cs:line 657
   at Domain.Policies.GarPolicy.<GetEgars_v2>d__13.MoveNext() in C:\Projects\Residuos-BackEnd\Domain\Policies\GarPolicy.cs:line 128
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Application.Services.Gars.GarService.<GetEgarsFromDb_v2>d__23.MoveNext() in C:\Projects\Residuos-BackEnd\Application\Services\Gars\GarService.cs:line 207
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.ValidateEnd(Task task)
   at Api.Controllers.GarController.<GetEGarsV2>d__15.MoveNext() in C:\Projects\Residuos-BackEnd\Api\Controllers\GarController.cs:line 280
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Threading.Tasks.TaskHelpersExtensions.<CastToObject>d__3`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ApiControllerActionInvoker.<InvokeActionAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Web.Http.Filters.ActionFilterAttribute.<CallOnActionExecutedAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.ActionFilterAttribute.<ExecuteActionFilterAsyncCore>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Controllers.ActionFilterResult.<ExecuteAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Filters.AuthorizationFilterAttribute.<ExecuteAuthorizationFilterAsyncCore>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() 
